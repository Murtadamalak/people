import{f as k}from"./chunk-3VW6UYWH.js";import{a as w,b as d,c as F,d as E,f as _,g as N,h as D,i as q,j as M,k as P,m as V}from"./chunk-WT3WPSVR.js";import{a as C}from"./chunk-AV447VWJ.js";import{a as A}from"./chunk-PP2E75A7.js";import{Ga as x,O as a,Pa as y,Qa as h,Ua as c,V as f,Va as t,W as g,Wa as e,Xa as i,Za as p,_a as v,eb as u,ta as b,va as s,yb as S}from"./chunk-5THSZBG5.js";function T(l,n){if(l&1&&(i(0,"img",22),t(1,"p",23),u(2,"\u0644\u062A\u063A\u064A\u064A\u0631 \u0627\u0644\u0635\u0648\u0631\u0629\u060C \u0627\u0636\u063A\u0637 \u0647\u0646\u0627"),e()),l&2){let o,r=v();c("src",(o=r.studentForm.get("photoUrl"))==null?null:o.value,b)}}function j(l,n){l&1&&(f(),t(0,"svg",24),i(1,"path",25),e(),g(),t(2,"p",26)(3,"span",27),u(4,"\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u062D\u0645\u064A\u0644"),e(),u(5," \u0623\u0648 \u0627\u0633\u062D\u0628 \u0648\u0623\u0641\u0644\u062A \u0627\u0644\u0635\u0648\u0631\u0629"),e(),t(6,"p",28),u(7,"SVG, PNG, JPG (MAX. 800x400px)"),e())}var G=class l{constructor(){this.fb=a(P);this.router=a(k);this.studentService=a(A);this.notificationService=a(C);this.studentForm=this.fb.group({name:["",d.required],class:["",d.required],guardianPhone:["",d.required],totalFee:[0,[d.required,d.min(1)]],notes:[""],photoUrl:[null]})}onFileSelected(n){let o=n.target.files?.[0];if(o){let r=new FileReader;r.onload=()=>{this.studentForm.patchValue({photoUrl:r.result})},r.readAsDataURL(o)}}onSubmit(){if(this.studentForm.valid){let n=this.studentForm.value,o={name:n.name||"",class:n.class||"",guardianPhone:n.guardianPhone||"",totalFee:n.totalFee||0,notes:n.notes||"",photoUrl:n.photoUrl||null};this.studentService.addStudent(o),this.notificationService.show("\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D!"),this.router.navigate(["/students"])}}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275cmp=x({type:l,selectors:[["app-student-add"]],decls:39,vars:3,consts:[[1,"max-w-4xl","mx-auto","bg-white","p-8","rounded-xl","shadow-lg"],[1,"text-3xl","font-bold","text-sky-700","mb-8","border-b","pb-4"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-4"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","name","formControlName","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-sky-500","focus:border-sky-500","block","w-full","p-2.5"],["for","class",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","class","formControlName","class","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-sky-500","focus:border-sky-500","block","w-full","p-2.5"],["for","guardianPhone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","tel","id","guardianPhone","formControlName","guardianPhone","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-sky-500","focus:border-sky-500","block","w-full","p-2.5"],["for","totalFee",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","number","id","totalFee","formControlName","totalFee","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-sky-500","focus:border-sky-500","block","w-full","p-2.5"],["for","photo",1,"block","mb-2","text-sm","font-medium","text-gray-900"],[1,"flex","items-center","justify-center","w-full"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["id","dropzone-file","type","file","accept","image/*",1,"hidden",3,"change"],["for","notes",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["id","notes","formControlName","notes","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-sky-500","focus:border-sky-500"],[1,"mt-8","text-left"],["type","submit",1,"text-white","bg-sky-600","hover:bg-sky-700","focus:ring-4","focus:outline-none","focus:ring-sky-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-8","py-2.5","text-center","disabled:bg-gray-400",3,"disabled"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0637\u0627\u0644\u0628",1,"w-32","h-32","object-cover","rounded-full","mb-2",3,"src"],[1,"text-sm","text-gray-500"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 16",1,"w-8","h-8","mb-4","text-gray-500"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"],[1,"mb-2","text-sm","text-gray-500"],[1,"font-semibold"],[1,"text-xs","text-gray-500"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"h1",1),u(2,"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F"),e(),t(3,"form",2),p("ngSubmit",function(){return r.onSubmit()}),t(4,"div",3)(5,"div",4)(6,"div")(7,"label",5),u(8,"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u0643\u0627\u0645\u0644"),e(),i(9,"input",6),e(),t(10,"div")(11,"label",7),u(12,"\u0627\u0644\u0635\u0641 \u0627\u0644\u062F\u0631\u0627\u0633\u064A"),e(),i(13,"input",8),e(),t(14,"div")(15,"label",9),u(16,"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631"),e(),i(17,"input",10),e(),t(18,"div")(19,"label",11),u(20,"\u0645\u0628\u0644\u063A \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0643\u0644\u064A"),e(),i(21,"input",12),e()(),t(22,"div",4)(23,"div")(24,"label",13),u(25,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0637\u0627\u0644\u0628"),e(),t(26,"div",14)(27,"label",15)(28,"div",16),y(29,T,3,1)(30,j,8,0),e(),t(31,"input",17),p("change",function(U){return r.onFileSelected(U)}),e()()()(),t(32,"div")(33,"label",18),u(34,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),e(),i(35,"textarea",19),e()()(),t(36,"div",20)(37,"button",21),u(38," \u062D\u0641\u0638 \u0627\u0644\u0637\u0627\u0644\u0628 "),e()()()()),o&2){let m;s(3),c("formGroup",r.studentForm),s(26),h((m=r.studentForm.get("photoUrl"))!=null&&m.value?29:30),s(8),c("disabled",r.studentForm.invalid)}},dependencies:[S,V,_,w,N,F,E,M,q,D],encapsulation:2,changeDetection:0})}};export{G as StudentAddComponent};
