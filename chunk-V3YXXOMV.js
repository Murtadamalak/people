import{f as V,g as F}from"./chunk-3VW6UYWH.js";import{a as A}from"./chunk-PP2E75A7.js";import{Ga as k,O as S,Pa as p,Qa as x,Sa as E,T as d,Ta as L,U as m,Va as i,Wa as o,Ya as y,Za as _,_a as l,a as b,b as w,da as f,eb as r,fb as c,gb as T,lb as g,va as a,yb as I}from"./chunk-5THSZBG5.js";var M=(n,e)=>e.id;function N(n,e){if(n&1&&(i(0,"span"),r(1),o()),n&2){let t=l(2);a(),c(t.sortDirection()==="asc"?"\u{1F53C}":"\u{1F53D}")}}function P(n,e){if(n&1&&(i(0,"span"),r(1),o()),n&2){let t=l(2);a(),c(t.sortDirection()==="asc"?"\u{1F53C}":"\u{1F53D}")}}function W(n,e){if(n&1&&(i(0,"span"),r(1),o()),n&2){let t=l(2);a(),c(t.sortDirection()==="asc"?"\u{1F53C}":"\u{1F53D}")}}function $(n,e){if(n&1&&(i(0,"span"),r(1),o()),n&2){let t=l(2);a(),c(t.sortDirection()==="asc"?"\u{1F53C}":"\u{1F53D}")}}function j(n,e){if(n&1&&(i(0,"span"),r(1),o()),n&2){let t=l(2);a(),c(t.sortDirection()==="asc"?"\u{1F53C}":"\u{1F53D}")}}function B(n,e){if(n&1){let t=y();i(0,"tr",11),_("click",function(){let u=d(t).$implicit,D=l(2);return m(D.viewStudent(u.id))}),i(1,"td",12),r(2),o(),i(3,"th",13),r(4),o(),i(5,"td",12),r(6),o(),i(7,"td",12),r(8),o(),i(9,"td",14),r(10),o(),i(11,"td",15),r(12),o(),i(13,"td",12),r(14),o()()}if(n&2){let t=e.$implicit,s=e.$index,u=l(2);a(2),c(s+1),a(2),T(" ",t.name," "),a(2),c(t.class),a(2),c(u.formatCurrency(t.totalFee)),a(2),c(u.formatCurrency(t.totalPaid)),a(2),c(u.formatCurrency(t.remaining)),a(2),c(t.notes||"-")}}function Q(n,e){if(n&1){let t=y();i(0,"div",4)(1,"table",6)(2,"thead",7)(3,"tr")(4,"th",8),r(5,"#"),o(),i(6,"th",9),_("click",function(){d(t);let u=l();return m(u.applySort("name"))}),r(7," \u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 "),p(8,N,2,1,"span"),o(),i(9,"th",9),_("click",function(){d(t);let u=l();return m(u.applySort("class"))}),r(10," \u0627\u0644\u0635\u0641 "),p(11,P,2,1,"span"),o(),i(12,"th",9),_("click",function(){d(t);let u=l();return m(u.applySort("totalFee"))}),r(13," \u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u0643\u0644\u064A "),p(14,W,2,1,"span"),o(),i(15,"th",9),_("click",function(){d(t);let u=l();return m(u.applySort("totalPaid"))}),r(16," \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0648\u0627\u0635\u0644 "),p(17,$,2,1,"span"),o(),i(18,"th",9),_("click",function(){d(t);let u=l();return m(u.applySort("remaining"))}),r(19," \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u062A\u0628\u0642\u064A "),p(20,j,2,1,"span"),o(),i(21,"th",8),r(22,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),o()()(),i(23,"tbody"),E(24,B,15,7,"tr",10,M),o()()()}if(n&2){let t=l();a(8),x(t.sortKey()==="name"?8:-1),a(3),x(t.sortKey()==="class"?11:-1),a(3),x(t.sortKey()==="totalFee"?14:-1),a(3),x(t.sortKey()==="totalPaid"?17:-1),a(3),x(t.sortKey()==="remaining"?20:-1),a(4),L(t.sortedStudents())}}function R(n,e){n&1&&(i(0,"div",5)(1,"p"),r(2,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u0648\u0646 \u062D\u0627\u0644\u064A\u0627\u064B."),o(),i(3,"a",16),r(4," \u0623\u0636\u0641 \u0623\u0648\u0644 \u0637\u0627\u0644\u0628 "),o()())}var K=class n{constructor(){this.studentService=S(A);this.router=S(V);this.sortKey=f("name");this.sortDirection=f("asc");this.studentsWithCalculations=g(()=>this.studentService.students().map(e=>{let t=this.studentService.calculateTotalPaid(e),s=e.totalFee-t;return w(b({},e),{totalPaid:t,remaining:s})}));this.sortedStudents=g(()=>{let e=this.sortKey(),t=this.sortDirection(),s=[...this.studentsWithCalculations()];return e&&s.sort((u,D)=>{let h=u[e],v=D[e],C=0;return h>v?C=1:h<v&&(C=-1),t==="asc"?C:-C}),s})}applySort(e){this.sortKey()===e?this.sortDirection.update(t=>t==="asc"?"desc":"asc"):(this.sortKey.set(e),this.sortDirection.set("asc"))}formatCurrency(e){return new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0}).format(e)}viewStudent(e){this.router.navigate(["/student",e])}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=k({type:n,selectors:[["app-student-list"]],decls:8,vars:1,consts:[[1,"bg-white","p-8","rounded-xl","shadow-lg"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold","text-sky-700"],["routerLink","/student/add",1,"bg-sky-600","text-white","px-4","py-2","rounded-lg","hover:bg-sky-700","transition-colors"],[1,"overflow-x-auto"],[1,"text-center","py-12","text-gray-500"],[1,"w-full","text-sm","text-right","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","cursor-pointer","hover:bg-gray-100",3,"click"],[1,"bg-white","border-b","hover:bg-gray-100","cursor-pointer","transition-colors","duration-200"],[1,"bg-white","border-b","hover:bg-gray-100","cursor-pointer","transition-colors","duration-200",3,"click"],[1,"px-6","py-4"],["scope","row",1,"px-6","py-4","font-medium","text-sky-600","whitespace-nowrap"],[1,"px-6","py-4","text-green-600","font-semibold"],[1,"px-6","py-4","text-red-600","font-semibold"],["routerLink","/student/add",1,"mt-4","inline-block","bg-sky-600","text-white","px-4","py-2","rounded-lg","hover:bg-sky-700","transition-colors"]],template:function(t,s){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0637\u0644\u0627\u0628"),o(),i(4,"a",3),r(5," \u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F "),o()(),p(6,Q,26,5,"div",4)(7,R,5,0,"div",5),o()),t&2&&(a(6),x(s.studentsWithCalculations().length>0?6:7))},dependencies:[I,F],encapsulation:2,changeDetection:0})}};export{K as StudentListComponent};
